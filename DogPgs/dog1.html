<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Pet Shop | Dogs | Lucky</title>
    <link rel="stylesheet" href="../PA 1/myStyle.css" type="text/css">
    <script>
        function CheckRegistration() {
            var ids = ["D101", "D102", "D103", "D104", "D105", "D106", "D107", "D108", "D109", "D110",
                        "C101", "C102", "C103", "C104", "C105", "C106", "C107", "C108", "C109", "C110",];
            var regName = /^[a-zA-Z]+$/;
            var emailCheck = /\S+@\S+\.\S+/;
            var visacardno = /^(?:4[0-9]{12}(?:[0-9]{3})?)$/;
            var addressCheck = /^\s*\S+(?:\s+\S+){2}/;
            var states = ["AK", "AL", "AR", "AZ", "CA", "CO", "CT", "DC", "DE", "FL", "GA", "HI",
                            "IA", "ID", "IL", "IN", "KS", "KY", "LA", "MA", "MD", "ME", "MI", "MN",
                            "MS", "MO", "MT", "NC", "NE", "NH", "NJ", "NM", "NV", "NY", "ND", "OH",
                            "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA",
                            "WV", "WI", "WY"];
            var zipCheck = 	/^(\d{5}(?:\-\d{4})?)$/;
            
            var fname = document.OrderForm.fname.value;
            var lname = document.OrderForm.lname.value;
            var petID = document.getElementById("product-id").value;
            var qty = document.getElementById("qty").value;
            var email = document.getElementById("clientEmail").value;
            var card = document.getElementById("credit-card").value;
            var expireMM = document.getElementById("expireMM").value;
            var expireYY = document.getElementById("expireYY").value;
            var address = document.getElementById("address").value;
            var state = document.getElementById("state").value.toUpperCase();
            var zip = document.getElementById("zip").value;
            var method = document.getElementById("shipping-method").value;

            console.log('checking')
            console.log(email)
            console.log(expireMM);
            console.log(expireYY);

            if (!regName.test(fname)) {
                alert ("Invalid First Name");
                return (false);
            }
            if (!regName.test(lname)) {
                alert ("Invalid Last Name");
                return (false);
            }
            if (ids.indexOf(petID) === -1) {
                alert ("Invalid Pet ID");
                return false;
            }
            if (!emailCheck.test(email)) {
                alert ("Invalid Email Address");
                return (false);
            }
            // try {
            //     email = new MailAddress(email).Address;
            // } catch(FormatException) {
            //     // address is invalid
            //     alert ("Invalid Email Address");
            //     return (false);
            // }
            if (!visacardno.test(card)) {
                alert ("Invalid Card Number");
                return (false);
            }
            if (expireYY == 21 && expireMM < 4) {
                alert ("Card already expired!");
                return (false);
            }
            console.log('after expireYY')
            if (!addressCheck.test(address)) {
                alert ("Invalid Address");
                return (false);
            }
            console.log('after address')
            if (states.indexOf(state) === -1) {
                alert ("Invalid State");
                return (false);
            }
            console.log('after state')
            if (!zipCheck.test(zip)) {
                alert ("Invalid Zip Code");
                return (false);
            }
            // console.log('after zip')

            // console.log('emailing')

            var body = `Hello Pet Shop,%0D%0A%0D%0A`
                        + `I'd like to place an order, the details are below:%0D%0A`
                        + `Name: ${fname} ${lname}%0D%0A`
                        + `Pet ID: ${petID}%0D%0A`
                        + `Quantity: ${qty}%0D%0A`
                        + `Card Info:%0D%0A`
                        + `     Number: ${card}%0D%0A`
                        + `     Expirate Date: ${expireMM}/${expireYY}%0D%0A`
                        + `Shipping Address:%0D%0A`
                        + `     ${address}%0D%0A`
                        + `     ${state}, ${zip}%0D%0A`
                        + `Shipping Method: ${method}%0D%0A%0D%0A`
                        + `Thank you%0D%0A`;
            var link = "mailto:thepetshop@mail.com?subject=Order%20Form&body=" + body;
            // var link = "mailto:name1@rapidtables.com?cc=name2@rapidtables.com&bcc=name3@rapidtables.com&subject=The%20subject%20of%20the%20email&body=The%20body%20of%20the%20email"
            //         + `I'd like to place an order, the details are below:\n`
            //         + `Name: ${fname} ${lname}\n`
            //         + `Pet ID: ${petID}\n`
            //         + `Quantity: ${qty}\n`
            //         + `Card Info: ${card}\n`
            //         + `Shipping Address:\n`
            //         + `     ${address}\n`
            //         + `     ${state}, ${zip}\n`
            //         + `Shipping Method: ${method}\n\n`
            //         + `Thank you\n`;

            // var link = "mailto:name1@rapidtables.com?cc=name2@rapidtables.com&bcc=name3@rapidtables.com&subject=The%20subject%20of%20the%20email&body=The%20body%20of%20the%20email"
            window.location.href = link;
            return (false);
        }
    </script>
</head>
<body>
    <div id="header">
        <h1><img src="../PA 1/images/shopLogo.png" style="width: auto;"></h1>
    </div>
    <div id="top-nav-bar">
        <ul>
            <li><a href="../PA 1/index.html"><h3> Home </h3></a></li>
            <li><a href="../PA 1/dogs.html"><h3> Dogs </h3></a></li>
            <li><a href="../PA 1/cats.html"><h3> Cats </h3></a></li>
            <li><a href="../PA 1/contact.html"><h3> Contact </h3></a></li>
        </ul>
    </div>

    <div id="main">

        <div class="row" style="text-align: left">
            <div class="col-3 col-s-5">
                <div class="profile">
                    <img src="../PA 1/images/DogImages/dog1.jfif">
                </div>
            </div>
            <div class="col-3 col-s-5" style="text-align: left; padding-top: 35px;">
                <p>Name: Lucky</p>
                <p>Age: 3</p>
                <p>Gender: Male</p>
                <p>Price: $1999.99</p>
                <p>ID: A1686673</p>
                <p>Lucky's Message: </p>
                <p>&emsp; I am a beautiful boy that needs a family that will 
                    understand that I will need some time to adjust and settle 
                    in my forever home. I will need a household, with everyone 
                    over the age of 16, which has experience assisting with under
                     socialized dogs. I would be the perfect companion for those 
                     that will want to work on building my confidence and to work 
                     on making me become more independent.</p>
            </div>
        </div>
        <fieldset>
            <legend>
                Order Information
            </legend>
            <div class="col-12 col-s-12" style="text-align: left">
                <form action="" name="OrderForm" onSubmit="return (CheckRegistration())"> 
                    <div class="row">
                        <div class="col-2 col-s-12" style="text-align: left"> 
                            <label for="fname">First Name: </label><br>
                            <input type="text" id="fname" name="fname" required><br>
                            <label for="lname">Last Name: </label><br>
                            <input type="text" id="lname" name="lname" required><br>
                        </div>
                        <div class="col-2 col-s-12" style="text-align: left"> 
                            <label for="product-id">Pet ID: </label><br>
                            <input type="text" id="product-id" name="product-id" value="D101" required><br>
                            <label for="qty">Quantiy: </label><br>
                            <input type="number" id="qty" name="qty" min="0" max="255" required><br>
                        </div>
                        <div class="col-2 col-s-12" style="text-align: left"> 
                            <label for="phone">Phone Number: </label><br>
                            <input type="tel" id="phone" name="phone" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" required placeholder="123-456-7890"><br>
                            <label for="clientEmail">Email: </label><br>
                            <input type="text" id="clientEmail" name="clientEmail" required><br><br>
                        </div>
                        <div class="col-2 col-s-12" style="text-align: left">
                            <label for="credit-card">Credit Card Number: </label><br>
                            <input type="text" id="credit-card" name="credit-card" placeholder="VISA Only" required><br>
                            <label for="expiration-date">Expiration Date: </label><br>
                            <select name='expireMM' id='expireMM' required>
                                <option value=''>Month</option>
                                <option value='01'>January</option>
                                <option value='02'>February</option>
                                <option value='03'>March</option>
                                <option value='04'>April</option>
                                <option value='05'>May</option>
                                <option value='06'>June</option>
                                <option value='07'>July</option>
                                <option value='08'>August</option>
                                <option value='09'>September</option>
                                <option value='10'>October</option>
                                <option value='11'>November</option>
                                <option value='12'>December</option>
                            </select> 
                            <select name='expireYY' id='expireYY' required>
                                <option value=''>Year</option>
                                <option value='21'>2021</option>
                                <option value='22'>2022</option>
                                <option value='23'>2023</option>
                                <option value='24'>2024</option>
                                <option value='25'>2025</option>
                            </select>
                            <br/>
                        </div>
                        <div class="col-2 col-s-12" style="text-align: left">
                            <label for="address">Shipping Address: </label><br>
                            <input type="text" id="address" name="address" required><br>
                            <label for="state">State: </label><br>
                            <input type="text" id="state" name="state" style="text-transform:uppercase" required><br>
                        </div>
                        <div class="col-2 col-s-12" style="text-align: left">
                            <label for="zip">Zip Code: </label><br>
                            <input type="text" id="zip" name="zip"required><br>
                            <label for="shipping-method">Shipping Method: </label><br>
                            <select name="shipping-method" id="shipping-method">
                                <option value="First Overnight">First Overnight</option>
                                <option value="2 days">2 days</option>
                                <option value="Ground">Ground</option>
                            </select><br/><br>
                        </div>
                    </div>
                    <div class="row">
                        <div class="formButton">
                            <input type="submit" value="Submit Order">
                        </div>
                    </div>
                </form>
            </div>
        </fieldset>

    </div>
</body>
</html>